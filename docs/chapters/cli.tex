% !TeX root = ../arara-manual.tex
\chapter{Command line}
\label{chap:commandline}

\arara\ is a command line tool. It can be used in a plethora of command interpreter implementations, from bash to a Windows prompt, provided that the Java runtime environment is accessible within the current session. This chapter covers the user interface design, as well as options (also known as flags or switches) that modify the underlying application behaviour.

\section{User interface design}
\label{sec:userinterfacedesign}

The goal of a user interface design is to make the interaction as simple and efficient as possible. Good user interface design facilitates finishing the task at hand without drawing unnecessary attention to itself. For \arara\ 4.0, we redesigned the interface in order to look more pleasant to the eye, after all, we work with \TeX\ and friends:

\begin{codebox}{Terminal}{teal}{\icnote}{white}
  __ _ _ __ __ _ _ __ __ _ 
 / _` | '__/ _` | '__/ _` |
| (_| | | | (_| | | | (_| |
 \__,_|_|  \__,_|_|  \__,_|

Processing 'doc5.tex' (size: 307 bytes, last modified: 05/29/2018
08:57:30), please wait.

(PDFLaTeX) PDFLaTeX engine .............................. SUCCESS
(BibTeX) The BibTeX reference management software ....... SUCCESS
(PDFLaTeX) PDFLaTeX engine .............................. SUCCESS
(PDFLaTeX) PDFLaTeX engine .............................. SUCCESS

Total: 1.45 seconds
\end{codebox}

First of all, we have the nice application logo, displayed using ASCII art. The entire layout is based on monospaced font spacing, usually used in terminal prompts. Hopefully, we expect you to be using a monospaced font, otherwise the visual effect will not be so pleasant. First and foremost, \arara\ displays details about the file being processed, including size and modification status:

\begin{codebox}{Terminal}{teal}{\icnote}{white}
Processing 'doc5.tex' (size: 307 bytes, last modified: 05/29/2018
08:57:30), please wait.
\end{codebox}

The list of tasks was also redesigned to be fully justified, and each entry displays both task and subtask names (the former being displayed enclosed in parentheses), besides of course the usual execution result:

\begin{codebox}{Terminal}{teal}{\icnote}{white}
(PDFLaTeX) PDFLaTeX engine .............................. SUCCESS
(BibTeX) The BibTeX reference management software ....... SUCCESS
(PDFLaTeX) PDFLaTeX engine .............................. SUCCESS
(PDFLaTeX) PDFLaTeX engine .............................. SUCCESS
\end{codebox}

% TODO fix reference
As previously mentioned in Section~\ref{foo} (page~\pageref{foo}), if a task fails, \arara\ will halt the entire execution at once and immediately report back to the user. This is an example of how a failed task looks like:

\begin{codebox}{Terminal}{teal}{\icnote}{white}
(PDFLaTeX) PDFLaTeX engine .............................. FAILURE
\end{codebox}

Also, observe that our tool displays the execution time before terminating, in seconds. The execution time has a very simple precision, as it is meant to be easily readable, and should not be considered for command profiling.

\begin{codebox}{Terminal}{teal}{\icnote}{white}
Total: 1.45 seconds
\end{codebox}

The tool has two execution modes: \emph{silent}, which is the default, and \emph{verbose}, which prints as much information about tasks as possible. When in silent mode, \arara\ will simply display the task and subtask names, as well as the execution result. Nothing more is added to the output. For instance:

\begin{codebox}{Terminal}{teal}{\icnote}{white}
(BibTeX) The BibTeX reference management software ....... SUCCESS
\end{codebox}

When executed in verbose mode, \arara\ will display the underlying system command output as well, when applied. In version 4.0 of our tool, this mode was also entirely redesigned in order to avoid unnecessary clutter, so it would be easier to spot each task. For instance:

\begin{codebox}{Terminal}{teal}{\icnote}{white}
-----------------------------------------------------------------
(BibTeX) The BibTeX reference management software
-----------------------------------------------------------------
This is BibTeX, Version 0.99d (TeX Live 2017)
The top-level auxiliary file: doc5.aux
The style file: plain.bst
Database file #1: mybib.bib

--------------------------------------------------------- SUCCESS
\end{codebox}

It is important to observe that, when in verbose mode, \arara\ can offer proper interaction when a certain system command requires user intervention. However, when in silent mode, the tool will simply discard this requirement and the command will almost surely fail.

\section{Options}
\label{sec:options}

In order to run \arara\ on your \TeX\ file, the simplest possible way is to provide the file name to the tool in your favourite command interpreter session, provided that the file has at least one directive:

\begin{codebox}{Terminal}{teal}{\icnote}{white}
$ arara doc6.tex
\end{codebox}

The tool has a set of command line options (also known as flags or switches) that modify the underlying execution behaviour or enhance the execution workflow. If you do not provide any parameters, \arara\ will display the tool usage:

\begin{codebox}{Terminal}{teal}{\icnote}{white}
$ arara
  __ _ _ __ __ _ _ __ __ _ 
 / _` | '__/ _` | '__/ _` |
| (_| | | | (_| | | | (_| |
 \__,_|_|  \__,_|_|  \__,_|

arara 4.0
Copyright (c) 2012-2017, Paulo Roberto Massa Cereda
All rights reserved

usage: arara [file [--dry-run] [--log] [--verbose] [--timeout N]
             [--max-loops N] [--language L] [ --preamble P ] [--header] |
             --help | --version]
 -h,--help                 print the help message
 -H,--header               extract directives only in the file header
 -l,--log                  generate a log output
 -L,--language <code>      set the application language
 -m,--max-loops <number>   set the maximum number of loops
 -n,--dry-run              go through all the motions of running a
                           command, but with no actual calls
 -p,--preamble <name>      set the file preamble based on the
                           configuration file
 -t,--timeout <number>     set the execution timeout (in milliseconds)
 -V,--version              print the application version
 -v,--verbose              print the command output
\end{codebox}